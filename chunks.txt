rm blob.b64
echo -n "aW1wb3J0IG9zDQppbXBvcnQgY3YyDQppbXBvcnQgbnVtcHkgYXMgbnANCmltcG9ydCBzeXMNCg0KIyBEZWZpbmUgcGF0aA0KZmlsZV9wYXRoID0gJ2NvZGUvTW9HZS9zY3JpcHRzL2luZmVyX3Bhbm9yYW1hLnB5Jw0KDQpwcmludChmIlJFU1RPUklORyB7ZmlsZV9wYXRofS4uLiIpDQpvcy5zeXN0ZW0oZiJnaXQgY2hlY2tvdXQge2ZpbGVfcGF0aH0iKQ0KDQpwcmludCgiUkVBRElORyBmaWxlIGNvbnRlbnQuLi4iKQ0Kd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InKSBhcyBmOg0KICAgIGxpbmVzID0gZi5yZWFkbGluZXMoKQ0KDQpuZXdfbGluZXMgPSBbXQ0KZm9yIGksIGxpbmUgaW4gZW51bWVyYXRlKGxpbmVzKToNCiAgICAjIEZpeCAxOiBMb2cgRGlzdGFuY2UgTWFwIFJlc2l6ZQ0KICAgICMgT3JpZ2luYWw6IHBhbm9yYW1hX2xvZ19kaXN0YW5jZV9tYXAgPSBucC53aGVyZShwcm9qZWN0aW9uX3ZhbGlkX21hc2ssIGN2Mi5yZW1hcChsb2dfc3BsaXR0ZWRfZGlzdGFuY2UsIHByb2plY3RlZF9waXhlbHNbLi4uLCAwXSwgcHJvamVjdGVkX3BpeGVsc1suLi4sIDFdLCBjdjIuSU5URVJfTElORUFSLCBib3JkZXJNb2RlPWN2Mi5CT1JERVJfUkVQTElDQVRFKSwgMCkNCiAgICBpZiAncGFub3JhbWFfbG9nX2Rpc3RhbmNlX21hcCA9IG5wLndoZXJlKHByb2plY3Rpb25fdmFsaWRfbWFzaywgY3YyLnJlbWFwJyBpbiBsaW5lOg0KICAgICAgICBpbmRlbnQgPSBsaW5lWzpsaW5lLmZpbmQoJ3Bhbm9yYW1hJyldDQogICAgICAgIG5l" >> blob.b64
echo -n "d19saW5lcy5hcHBlbmQoaW5kZW50ICsgIiMgRklYLTE6IFJlc2l6ZSBEaXN0YW5jZSBNYXBcbiIpDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgInRtcF9kID0gY3YyLnJlbWFwKGxvZ19zcGxpdHRlZF9kaXN0YW5jZSwgcHJvamVjdGVkX3BpeGVsc1suLi4sIDBdLCBwcm9qZWN0ZWRfcGl4ZWxzWy4uLiwgMV0sIGN2Mi5JTlRFUl9MSU5FQVIsIGJvcmRlck1vZGU9Y3YyLkJPUkRFUl9SRVBMSUNBVEUpXG4iKQ0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGluZGVudCArICJpZiB0bXBfZC5zaGFwZSAhPSBwcm9qZWN0aW9uX3ZhbGlkX21hc2suc2hhcGU6IHRtcF9kID0gY3YyLnJlc2l6ZSh0bXBfZCwgKHByb2plY3Rpb25fdmFsaWRfbWFzay5zaGFwZVsxXSwgcHJvamVjdGlvbl92YWxpZF9tYXNrLnNoYXBlWzBdKSwgaW50ZXJwb2xhdGlvbj1jdjIuSU5URVJfTkVBUkVTVClcbiIpDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgInBhbm9yYW1hX2xvZ19kaXN0YW5jZV9tYXAgPSBucC53aGVyZShwcm9qZWN0aW9uX3ZhbGlkX21hc2ssIHRtcF9kLCAwKVxuIikNCiAgICANCiAgICAjIEZpeCAyOiBQcmVkIE1hc2sgUmVzaXplDQogICAgIyBPcmlnaW5hbDogcGFub3JhbWFfcHJlZF9tYXNrID0gcHJvamVjdGlvbl92YWxpZF9tYXNrICYgKGN2Mi5yZW1hcChwcmVkX21hc2tzW2ldLmFzdHlwZShucC51aW50OCksIHByb2plY3RlZF9waXhlbHNbLi4uLCAwXSwgcHJvamVjdGVkX3BpeGVsc1su" >> blob.b64
echo -n "Li4sIDFdLCBjdjIuSU5URVJfTkVBUkVTVCwgYm9yZGVyTW9kZT1jdjIuQk9SREVSX1JFUExJQ0FURSkgPiAwKQ0KICAgIGVsaWYgJ3Bhbm9yYW1hX3ByZWRfbWFzayA9IHByb2plY3Rpb25fdmFsaWRfbWFzayAmIChjdjIucmVtYXAnIGluIGxpbmU6DQogICAgICAgIGluZGVudCA9IGxpbmVbOmxpbmUuZmluZCgncGFub3JhbWEnKV0NCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAiIyBGSVgtMjogUmVzaXplIE1hc2tcbiIpDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgInRtcF9tID0gY3YyLnJlbWFwKHByZWRfbWFza3NbaV0uYXN0eXBlKG5wLnVpbnQ4KSwgcHJvamVjdGVkX3BpeGVsc1suLi4sIDBdLCBwcm9qZWN0ZWRfcGl4ZWxzWy4uLiwgMV0sIGN2Mi5JTlRFUl9ORUFSRVNULCBib3JkZXJNb2RlPWN2Mi5CT1JERVJfUkVQTElDQVRFKVxuIikNCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAiaWYgdG1wX20uc2hhcGUgIT0gcHJvamVjdGlvbl92YWxpZF9tYXNrLnNoYXBlOiB0bXBfbSA9IGN2Mi5yZXNpemUodG1wX20sIChwcm9qZWN0aW9uX3ZhbGlkX21hc2suc2hhcGVbMV0sIHByb2plY3Rpb25fdmFsaWRfbWFzay5zaGFwZVswXSksIGludGVycG9sYXRpb249Y3YyLklOVEVSX05FQVJFU1QpXG4iKQ0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGluZGVudCArICJwYW5vcmFtYV9wcmVkX21hc2sgPSBwcm9qZWN0aW9uX3ZhbGlkX21hc2sgJiAodG1wX20gPiAwKVxu" >> blob.b64
echo -n "IikNCg0KICAgICMgRml4IDM6IFBvaW50cyB0byBOb3JtYWxzIFNpZ25hdHVyZQ0KICAgIGVsaWYgJ25vcm1hbHMsIG5vcm1hbHNfbWFzayA9IHV0aWxzM2QubnVtcHkucG9pbnRzX3RvX25vcm1hbHMocG9pbnRzLCBwYW5vcmFtYV9tYXNrKScgaW4gbGluZToNCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChsaW5lLnJlcGxhY2UoJ25vcm1hbHMsIG5vcm1hbHNfbWFzayA9IHV0aWxzM2QubnVtcHkucG9pbnRzX3RvX25vcm1hbHMocG9pbnRzLCBwYW5vcmFtYV9tYXNrKScsICdub3JtYWxzID0gdXRpbHMzZC5udW1weS5wb2ludHNfdG9fbm9ybWFscyhwb2ludHMpOyBub3JtYWxzX21hc2sgPSBwYW5vcmFtYV9tYXNrJykpDQoNCiAgICAjIEZpeCA0OiBJbWFnZSBNZXNoIChXcmFwIGluIHRyeS9leGNlcHQpDQogICAgZWxpZiAnZmFjZXMsIHZlcnRpY2VzLCB2ZXJ0ZXhfY29sb3JzLCB2ZXJ0ZXhfdXZzID0gdXRpbHMzZC5udW1weS5pbWFnZV9tZXNoKHBvaW50cywgcGFub3JhbWFfbWFzayknIGluIGxpbmU6DQogICAgICAgIGluZGVudCA9IGxpbmVbOmxpbmUuZmluZCgnZmFjZXMnKV0NCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAidHJ5OlxuIikNCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAiICAgIGZhY2VzLCB2ZXJ0aWNlcywgdmVydGV4X2NvbG9ycywgdmVydGV4X3V2cyA9IHV0aWxzM2QubnVtcHkuaW1hZ2VfbWVzaChwb2ludHMsIHBhbm9yYW1hX21hc2spXG4iKQ0KICAgICAgICBu" >> blob.b64
echo -n "ZXdfbGluZXMuYXBwZW5kKGluZGVudCArICJleGNlcHQ6XG4iKQ0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGluZGVudCArICIgICAgZmFjZXMgPSBOb25lXG4iKQ0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGluZGVudCArICIgICAgcHJpbnQoJ1dBUk5JTkc6IHV0aWxzM2QuaW1hZ2VfbWVzaCBmYWlsZWQsIHNraXBwaW5nIG1lc2ggZ2VuZXJhdGlvbicpXG4iKQ0KDQogICAgIyBGaXggNGI6IFNhdmUgT0JKIChDaGVjayBpZiBmYWNlcyBleGlzdCkNCiAgICBlbGlmICJ1dGlsczNkLmlvLnNhdmVfb2JqKHNhdmVfcGF0aCAvICdtZXNoLm9iaiciIGluIGxpbmU6DQogICAgICAgIGluZGVudCA9IGxpbmVbOmxpbmUuZmluZCgndXRpbHMzZCcpXQ0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGluZGVudCArICJpZiBmYWNlcyBpcyBub3QgTm9uZTpcbiIpDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgIiAgICAiICsgbGluZS5zdHJpcCgpICsgIlxuIikNCg0KICAgICMgRml4IDU6IFNhdmUgRVhSIChXcmFwIGluIHRyeS9leGNlcHQpDQogICAgZWxpZiAiY3YyLmltd3JpdGUoc3RyKHNhdmVfcGF0aCAvICdwb2ludHMuZXhyJykiIGluIGxpbmU6DQogICAgICAgIGluZGVudCA9IGxpbmVbOmxpbmUuZmluZCgnY3YyJyldDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgInRyeTpcbiIpDQogICAgICAgIG5ld19saW5lcy5hcHBlbmQoaW5kZW50ICsgIiAgICAiICsgbGluZS5zdHJpcCgpICsg" >> blob.b64
echo -n "IlxuIikNCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAiZXhjZXB0OlxuIikNCiAgICAgICAgbmV3X2xpbmVzLmFwcGVuZChpbmRlbnQgKyAiICAgIHBhc3NcbiIpDQoNCiAgICBlbHNlOg0KICAgICAgICBuZXdfbGluZXMuYXBwZW5kKGxpbmUpDQoNCnByaW50KCJXUklUSU5HIHBhdGNoZWQgZmlsZS4uLiIpDQp3aXRoIG9wZW4oZmlsZV9wYXRoLCAndycpIGFzIGY6DQogICAgZi53cml0ZWxpbmVzKG5ld19saW5lcykNCg0KcHJpbnQoIlNVQ0NFU1M6IGluZmVyX3Bhbm9yYW1hLnB5IGlzIGZ1bGx5IHBhdGNoZWQuIikNCg==" >> blob.b64
base64 -d blob.b64 > fix_final.py
python fix_final.py
